/**
 * blog-web - v2.0.0-SNAPSHOT
 * https://github.com/shree-venkat
 */
var AllPostsViewModel=function(){var a=this;a.Posts=window.ko.observableArray([]),a.TotalNumberOfPosts=window.ko.observable(-1),a.NumberOfPostsInCurrentPage=window.ko.observable(-1),a.UrlSlug=window.ko.observable(""),a.Category=window.ko.observable(""),a.Tag=window.ko.observable(""),a.Archive=window.ko.observable(""),a.SearchTerm=window.ko.observable(""),a.CurrPage=window.ko.observable(""),a.PrevPageUrl=window.ko.observable(""),a.NextPageUrl=window.ko.observable(""),a.LoadPosts=function(){var b=getQsValue("category");b=b?b:"";var c=getQsValue("tag");c=c?c:"";var d=getQsValue("archive");d=d?d:"";var e=getQsValue("searchTerm");e=e?e:"",allPostsApi.client.getAllPosts("",b,c,0,d,e).done(function(b){a.ProcessResult(b)}).error(function(){toaster.error("An error occured while retrieving posts. Please try again alater.","Error")})},a.UpdatePosts=function(b){ShowProcessing("Showing relevant posts ..."),allPostsApi.client.invoke(b).done(function(b){a.ProcessResult(b),HideProcessing()}).error(function(){alertify("An error occured while retrieving posts. Please try again alater.",AlertSeverity.ERROR),HideProcessing()})},a.ProcessResult=function(b){if(b.UrlSlug=b.UrlSlug?b.UrlSlug:"",b.Category=b.Category?b.Category:"",b.Tag=b.Tag?b.Tag:"",b.Archive=b.Archive?b.Archive:"",b.SearchTerm=b.SearchTerm?b.SearchTerm:"",b.CurrPage=b.CurrPage?b.CurrPage:"",b.Category?$("#blog-menu-categories ul li").each(function(a){var c=$(this).find("a").first().html();c&&c.toLowerCase()==b.Category.toLowerCase()?($(this).find("a").first().addClass("highlight"),$("#blog-menu-categories button").html('<span class="button-text">'+c+'</span> <span class="caret-holder"> <span class="caret"></span> </span>')):$(this).find("a").first().removeClass("highlight")}):$("#blog-menu-categories ul li").each(function(a){var b=$(this).find("a").first().html();"All Categories"==b?($(this).find("a").first().addClass("highlight"),$("#blog-menu-categories button").html('<span class="button-text">'+b+'</span> <span class="caret-holder"> <span class="caret"></span> </span>')):$(this).find("a").first().removeClass("highlight")}),$("#blog-menu-tags .tag-link-contents a").each(function(a){var c=$(this).html();c&&c.toLowerCase()==b.Tag.toLowerCase()?$(this).addClass("selected"):$(this).removeClass("selected")}),b.SearchTerm){$("input[name='searchTerm']").val(b.SearchTerm);var c='<div class="search-button input-group-addon close-search"><i class="fa fa-times"></i></div>';$(c).insertAfter("input[name='searchTerm']"),$(".close-search").click(function(a){$("input[name='searchTerm']").val(""),$("form").submit()})}var d=Enumerable.From(b.AllPosts).Select(function(c){var d=Enumerable.From(c.Tags).Select(function(c){return c={Parent:a,Id:c.Id,Name:c.Name,UrlSlug:c.UrlSlug,Description:c.Description,Class:c.Class,TagHref:"/Blog/AllPosts/"+c.UrlSlug+"?tag="+c.Name+"&category="+b.Category,SelectTag:function(){var b=this.TagHref.replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)},SelectedTagHref:"/Blog/AllPosts?category="+b.Category,DeselectTag:function(){var b=this.SelectedTagHref.replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)}}}).OrderBy(function(a){return a.Name}).ToArray(),e=c.PostedOn.toString().replace("T"," "),f=$.datepicker.formatDate("DD, MM dd, yy",$.datepicker.parseDate("yy-mm-dd",e)),g="";if(null!=c.ModifiedOn)var h=c.ModifiedOn.toString().replace("T"," "),g=$.datepicker.formatDate("MM dd, yy",$.datepicker.parseDate("yy-mm-dd",h));return c={Parent:a,Id:c.Id,Title:c.Title,ShortDescription:c.ShortDescription,ShorterDescription:c.ShortDescription.substring(0,150),UrlSlug:c.UrlSlug,Published:c.Published,PostedOn:f,ModifiedOn:g,Category:{Id:c.Category.Id,Name:c.Category.Name,UrlSlug:c.Category.UrlSlug,Description:c.Category.Description},Tags:window.ko.observableArray(d),PostHref:"/Blog/"+c.Id+"/"+c.UrlSlug+"?category="+b.Category+"&tag="+b.Tag+"&cur="+b.CurrPage+"&searchTerm="+b.SearchTerm,CategoryHref:"/Blog/AllPosts/"+c.Category.UrlSlug+"?category="+c.Category.Name+"&tag="+b.Tag,SelectCategory:function(){var b=this.CategoryHref.replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)},SelectedCategoryHref:"/Blog/AllPosts?tag="+b.Tag,DeselectCategory:function(){var b=this.SelectedCategoryHref.replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)}}}).ToArray();a.Posts(d),a.TotalNumberOfPosts(b.TotalCount),a.NumberOfPostsInCurrentPage(d.length),a.UrlSlug(b.UrlSlug),a.Category(b.Category),a.Tag(b.Tag),a.Archive(b.Archive),a.SearchTerm(b.SearchTerm),a.CurrPage(b.CurrPage),b.PrevPage||0===b.PrevPage?a.PrevPageUrl("/Blog/AllPosts/"+b.UrlSlug+"?category="+b.Category+"&tag="+b.Tag+"&cur="+b.PrevPage+"&searchTerm="+b.SearchTerm):a.PrevPageUrl(""),b.NextPage?a.NextPageUrl("/Blog/AllPosts/"+b.UrlSlug+"?category="+b.Category+"&tag="+b.Tag+"&cur="+b.NextPage+"&searchTerm="+b.SearchTerm):a.NextPageUrl(""),window.scrollTo(0,0)},a.GoToPrevPage=function(){var b=a.PrevPageUrl().replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)},a.GoToNextPage=function(){var b=a.NextPageUrl().replace("/Blog/AllPosts","/api/GetAllPosts");a.UpdatePosts(b)}},allPostsApi=allPostsApi||{},allPostsMvcViewModel=allPostsMvcViewModel||null;allPostsApi.client=function(a){var b=function(b,c,d,e,f,g){var h=a+"/GetAllPosts/"+b+"?category="+c+"&tag="+d+"&cur="+e+"&archive="+f+"&searchTerm="+g;return $.ajax({url:h,type:"GET",dataType:"json",async:!0})},c=function(a){return $.ajax({url:a,type:"GET",dataType:"json",async:!0})};return{getAllPosts:b,invoke:c}}(allPostsMvcViewModel.AllPostsApiEndpoint),function(){"use strict";var a=new AllPostsViewModel;$.when(a.LoadPosts()).done(function(){setTimeout(function(){ko.applyBindings(a,document.getElementById("all-posts-section"))},500),setTimeout(function(){},1e3)})}();